<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notepad</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            max-width: 1400px;
            margin: 0 auto;
            overflow: hidden;
        }

        .header {
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1rem;
            font-weight: 500;
            color: #333;
        }

        .btn {
            background: white;
            color: #333;
            border: 1px solid #ccc;
            padding: 6px 14px;
            cursor: pointer;
            font-size: 0.85rem;
            border-radius: 4px;
        }

        .btn:hover {
            background: #f5f5f5;
        }

        .main {
            display: flex;
            min-height: calc(100vh - 240px);
        }

        .panel {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .panel-left {
            border-right: 1px solid #e0e0e0;
        }

        .panel-header {
            padding: 10px 16px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fafafa;
        }

        .panel-header span {
            font-size: 0.85rem;
            color: #666;
        }

        .toolbar {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .toolbar-btn {
            background: white;
            color: #333;
            border: 1px solid #ccc;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 0.75rem;
            min-width: 28px;
            border-radius: 4px;
        }

        .toolbar-btn:hover {
            background: #f0f0f0;
        }

        .toolbar-btn:active {
            background: #e5e5e5;
        }

        #memo {
            flex: 1;
            width: 100%;
            padding: 16px;
            border: none;
            outline: none;
            font-size: 0.9rem;
            line-height: 1.6;
            resize: none;
            font-family: Consolas, Monaco, monospace;
            color: #333;
        }

        #memo::placeholder {
            color: #999;
        }

        #preview {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #333;
        }

        #preview h1, #preview h2, #preview h3 {
            margin: 16px 0 8px 0;
        }

        #preview h1:first-child, #preview h2:first-child, #preview h3:first-child {
            margin-top: 0;
        }

        #preview h1 { font-size: 1.5rem; }
        #preview h2 { font-size: 1.25rem; }
        #preview h3 { font-size: 1.1rem; }

        #preview p { margin: 8px 0; }

        #preview code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: Consolas, Monaco, monospace;
            font-size: 0.85em;
        }

        #preview pre {
            background: #f5f5f5;
            padding: 12px;
            overflow-x: auto;
            margin: 8px 0;
        }

        #preview pre code {
            padding: 0;
            background: none;
        }

        #preview ul, #preview ol {
            margin: 8px 0;
            padding-left: 24px;
        }

        #preview blockquote {
            border-left: 3px solid #ccc;
            margin: 8px 0;
            padding-left: 12px;
            color: #666;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #333;
            color: white;
            padding: 10px 20px;
            font-size: 0.85rem;
            opacity: 0;
            transition: all 0.2s ease;
            border-radius: 6px;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .footer {
            padding: 12px 20px;
            border-top: 1px solid #e0e0e0;
            font-size: 0.8rem;
            color: #999;
            text-align: center;
        }

        .lang-select {
            background: white;
            color: #333;
            border: 1px solid #ccc;
            padding: 6px 10px;
            cursor: pointer;
            font-size: 0.85rem;
            border-radius: 4px;
            outline: none;
        }

        .lang-select:hover {
            background: #f5f5f5;
        }

        .lang-select:focus {
            border-color: #999;
        }


    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 data-i18n="title">Î©îÎ™®Ïû•</h1>
            <div style="display: flex; gap: 8px;">
                <select class="lang-select" id="langSelect" onchange="changeLanguage(this.value)">
                    <option value="en">English</option>
                    <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                    <option value="ja">Êó•Êú¨Ë™û</option>
                    <option value="zh">‰∏≠Êñá</option>
                    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                </select>
                <button class="btn" onclick="shareNote()" data-i18n="share">Share</button>
            </div>
        </div>
        <div class="main">
            <div class="panel panel-left">
                <div class="panel-header">
                    <span data-i18n="edit">Ìé∏Ïßë</span>
                    <div class="toolbar">
                        <button class="toolbar-btn" onclick="applyFormat('bold')" data-i18n-title="boldTitle"><b>B</b></button>
                        <button class="toolbar-btn" onclick="applyFormat('italic')" data-i18n-title="italicTitle"><i>I</i></button>
                        <button class="toolbar-btn" onclick="applyFormat('strike')" data-i18n-title="strikeTitle"><s>S</s></button>
                        <button class="toolbar-btn" onclick="applyFormat('code')" data-i18n-title="codeTitle">&lt;/&gt;</button>
                        <button class="toolbar-btn" onclick="applyFormat('h1')" data-i18n-title="h1Title">H1</button>
                        <button class="toolbar-btn" onclick="applyFormat('h2')" data-i18n-title="h2Title">H2</button>
                        <button class="toolbar-btn" onclick="applyFormat('h3')" data-i18n-title="h3Title">H3</button>
                        <button class="toolbar-btn" onclick="applyFormat('quote')" data-i18n-title="quoteTitle">"</button>
                        <button class="toolbar-btn" onclick="applyFormat('ul')" data-i18n-title="listTitle">‚Ä¢</button>
                        <button class="toolbar-btn" onclick="applyFormat('link')" data-i18n-title="linkTitle">üîó</button>
                    </div>
                </div>
                <textarea id="memo" data-i18n-placeholder="placeholder"></textarea>
            </div>
            <div class="panel">
                <div class="panel-header">
                    <span data-i18n="preview">ÎØ∏Î¶¨Î≥¥Í∏∞</span>
                </div>
                <div id="preview"></div>
            </div>
        </div>
        <div class="footer" data-i18n="footer">
            Í≥µÏú† Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ URLÎ°ú Î©îÎ™®Î•º Í≥µÏú†Ìï† Ïàò ÏûàÏäµÎãàÎã§
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script>
        const memoArea = document.getElementById('memo');
        const preview = document.getElementById('preview');
        const toast = document.getElementById('toast');
        const langSelect = document.getElementById('langSelect');

        const i18n = {
            en: {
                title: 'Notepad',
                share: 'Share',
                edit: 'Edit',
                preview: 'Preview',
                placeholder: 'Write your memo...',
                footer: 'Click the share button to share your memo via URL',
                loadedMsg: 'Shared memo loaded!',
                emptyMsg: 'Please enter memo content',
                copiedMsg: 'Share link copied!',
                boldTitle: 'Bold',
                italicTitle: 'Italic',
                strikeTitle: 'Strikethrough',
                codeTitle: 'Code',
                h1Title: 'Heading 1',
                h2Title: 'Heading 2',
                h3Title: 'Heading 3',
                quoteTitle: 'Quote',
                listTitle: 'List',
                linkTitle: 'Link'
            },
            ko: {
                title: 'Î©îÎ™®Ïû•',
                share: 'Í≥µÏú†',
                edit: 'Ìé∏Ïßë',
                preview: 'ÎØ∏Î¶¨Î≥¥Í∏∞',
                placeholder: 'Î©îÎ™®Î•º ÏûëÏÑ±ÌïòÏÑ∏Ïöî...',
                footer: 'Í≥µÏú† Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ URLÎ°ú Î©îÎ™®Î•º Í≥µÏú†Ìï† Ïàò ÏûàÏäµÎãàÎã§',
                loadedMsg: 'Í≥µÏú†Îêú Î©îÎ™®Î•º Î∂àÎü¨ÏôîÏäµÎãàÎã§!',
                emptyMsg: 'Î©îÎ™® ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî',
                copiedMsg: 'Í≥µÏú† ÎßÅÌÅ¨Í∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!',
                boldTitle: 'ÍµµÍ≤å',
                italicTitle: 'Í∏∞Ïö∏ÏûÑ',
                strikeTitle: 'Ï∑®ÏÜåÏÑ†',
                codeTitle: 'ÏΩîÎìú',
                h1Title: 'Ï†úÎ™©1',
                h2Title: 'Ï†úÎ™©2',
                h3Title: 'Ï†úÎ™©3',
                quoteTitle: 'Ïù∏Ïö©',
                listTitle: 'Î™©Î°ù',
                linkTitle: 'ÎßÅÌÅ¨'
            },
            ja: {
                title: '„É°„É¢Â∏≥',
                share: 'ÂÖ±Êúâ',
                edit: 'Á∑®ÈõÜ',
                preview: '„Éó„É¨„Éì„É•„Éº',
                placeholder: '„É°„É¢„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...',
                footer: 'ÂÖ±Êúâ„Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®URL„Åß„É°„É¢„ÇíÂÖ±Êúâ„Åß„Åç„Åæ„Åô',
                loadedMsg: 'ÂÖ±Êúâ„É°„É¢„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„ÅüÔºÅ',
                emptyMsg: '„É°„É¢ÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                copiedMsg: 'ÂÖ±Êúâ„É™„É≥„ÇØ„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ',
                boldTitle: 'Â§™Â≠ó',
                italicTitle: 'Êñú‰Ωì',
                strikeTitle: 'Âèñ„ÇäÊ∂à„ÅóÁ∑ö',
                codeTitle: '„Ç≥„Éº„Éâ',
                h1Title: 'Ë¶ãÂá∫„Åó1',
                h2Title: 'Ë¶ãÂá∫„Åó2',
                h3Title: 'Ë¶ãÂá∫„Åó3',
                quoteTitle: 'ÂºïÁî®',
                listTitle: '„É™„Çπ„Éà',
                linkTitle: '„É™„É≥„ÇØ'
            },
            zh: {
                title: 'ËÆ∞‰∫ãÊú¨',
                share: 'ÂàÜ‰∫´',
                edit: 'ÁºñËæë',
                preview: 'È¢ÑËßà',
                placeholder: 'ËØ∑ËæìÂÖ•Â§áÂøòÂΩï...',
                footer: 'ÁÇπÂáªÂàÜ‰∫´ÊåâÈíÆÈÄöËøáURLÂàÜ‰∫´ÊÇ®ÁöÑÂ§áÂøòÂΩï',
                loadedMsg: 'Â∑≤Âä†ËΩΩÂÖ±‰∫´Â§áÂøòÂΩïÔºÅ',
                emptyMsg: 'ËØ∑ËæìÂÖ•Â§áÂøòÂΩïÂÜÖÂÆπ',
                copiedMsg: 'ÂàÜ‰∫´ÈìæÊé•Â∑≤Â§çÂà∂ÔºÅ',
                boldTitle: 'Á≤ó‰Ωì',
                italicTitle: 'Êñú‰Ωì',
                strikeTitle: 'Âà†Èô§Á∫ø',
                codeTitle: '‰ª£Á†Å',
                h1Title: 'Ê†áÈ¢ò1',
                h2Title: 'Ê†áÈ¢ò2',
                h3Title: 'Ê†áÈ¢ò3',
                quoteTitle: 'ÂºïÁî®',
                listTitle: 'ÂàóË°®',
                linkTitle: 'ÈìæÊé•'
            },
            hi: {
                title: '‡§®‡•ã‡§ü‡§™‡•à‡§°',
                share: '‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç',
                edit: '‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                preview: '‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®',
                placeholder: '‡§Ö‡§™‡§®‡§æ ‡§Æ‡•á‡§Æ‡•ã ‡§≤‡§ø‡§ñ‡•á‡§Ç...',
                footer: 'URL ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§Ö‡§™‡§®‡§æ ‡§Æ‡•á‡§Æ‡•ã ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§¨‡§ü‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç',
                loadedMsg: '‡§∏‡§æ‡§ù‡§æ ‡§Æ‡•á‡§Æ‡•ã ‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§Ø‡§æ!',
                emptyMsg: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•á‡§Æ‡•ã ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                copiedMsg: '‡§∏‡§æ‡§ù‡§æ ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•â‡§™‡•Ä ‡§π‡•ã ‡§ó‡§Ø‡§æ!',
                boldTitle: '‡§¨‡•ã‡§≤‡•ç‡§°',
                italicTitle: '‡§á‡§ü‡•à‡§≤‡§ø‡§ï',
                strikeTitle: '‡§∏‡•ç‡§ü‡•ç‡§∞‡§æ‡§á‡§ï‡§•‡•ç‡§∞‡•Ç',
                codeTitle: '‡§ï‡•ã‡§°',
                h1Title: '‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï 1',
                h2Title: '‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï 2',
                h3Title: '‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï 3',
                quoteTitle: '‡§â‡§¶‡•ç‡§ß‡§∞‡§£',
                listTitle: '‡§∏‡•Ç‡§ö‡•Ä',
                linkTitle: '‡§≤‡§ø‡§Ç‡§ï'
            }
        };

        let currentLang = localStorage.getItem('memo-lang') || 'en';

        function applyLanguage() {
            const texts = i18n[currentLang];
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (texts[key]) el.textContent = texts[key];
            });
            
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (texts[key]) el.placeholder = texts[key];
            });

            document.querySelectorAll('[data-i18n-title]').forEach(el => {
                const key = el.getAttribute('data-i18n-title');
                if (texts[key]) el.title = texts[key];
            });
            
            document.documentElement.lang = currentLang;
            document.title = texts.title;
            langSelect.value = currentLang;
        }

        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('memo-lang', currentLang);
            applyLanguage();
        }

        function renderMarkdown() {
            preview.innerHTML = marked.parse(memoArea.value);
        }

        memoArea.addEventListener('input', renderMarkdown);

        function applyFormat(type) {
            const start = memoArea.selectionStart;
            const end = memoArea.selectionEnd;
            const text = memoArea.value;
            const selected = text.substring(start, end);
            
            let before = '';
            let after = '';
            let newText = selected;
            let cursorOffset = 0;
            
            switch(type) {
                case 'bold':
                    before = '**';
                    after = '**';
                    break;
                case 'italic':
                    before = '*';
                    after = '*';
                    break;
                case 'strike':
                    before = '~~';
                    after = '~~';
                    break;
                case 'code':
                    before = '`';
                    after = '`';
                    break;
                case 'h1':
                    before = '# ';
                    break;
                case 'h2':
                    before = '## ';
                    break;
                case 'h3':
                    before = '### ';
                    break;
                case 'quote':
                    before = '> ';
                    break;
                case 'ul':
                    before = '- ';
                    break;
                case 'link':
                    before = '[';
                    after = '](url)';
                    break;
            }
            
            const result = text.substring(0, start) + before + selected + after + text.substring(end);
            memoArea.value = result;
            
            memoArea.focus();
            if (selected) {
                memoArea.setSelectionRange(start + before.length, end + before.length);
            } else {
                memoArea.setSelectionRange(start + before.length, start + before.length);
            }
            
            renderMarkdown();
        }

        function loadFromHash() {
            const hash = window.location.hash.slice(1);
            if (hash) {
                try {
                    const decoded = decodeURIComponent(escape(atob(hash)));
                    memoArea.value = decoded;
                    renderMarkdown();
                    showToast(i18n[currentLang].loadedMsg);
                } catch (e) {
                    console.error('Î©îÎ™® Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®:', e);
                }
            }
        }

        function shareNote() {
            const content = memoArea.value;
            if (!content.trim()) {
                showToast(i18n[currentLang].emptyMsg);
                return;
            }

            const encoded = btoa(unescape(encodeURIComponent(content)));
            const shareUrl = window.location.origin + window.location.pathname + '#' + encoded;

            navigator.clipboard.writeText(shareUrl).then(() => {
                showToast(i18n[currentLang].copiedMsg);
                history.replaceState(null, null, '#' + encoded);
            }).catch(() => {
                prompt('Í≥µÏú† ÎßÅÌÅ¨:', shareUrl);
            });
        }

        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        window.addEventListener('hashchange', loadFromHash);
        document.addEventListener('DOMContentLoaded', () => {
            applyLanguage();
            loadFromHash();
        });
    </script>
</body>
</html>
